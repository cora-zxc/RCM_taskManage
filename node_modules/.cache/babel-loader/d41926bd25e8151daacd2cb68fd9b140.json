{"ast":null,"code":"var _jsxFileName = \"/Users/tim/Documents/React/React_test/src/SortableTable.js\";\nimport React from \"react\";\nimport 'antd/dist/antd.css';\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\nimport { Table } from 'antd';\nimport arrayMove from 'array-move';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SortableItem = sortableElement(_c = props => /*#__PURE__*/_jsxDEV(\"tr\", { ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 47\n}, this));\n_c2 = SortableItem;\nconst SortableContainer = sortableContainer(_c3 = props => /*#__PURE__*/_jsxDEV(\"tbody\", { ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 8,\n  columnNumber: 54\n}, this));\n_c4 = SortableContainer;\n\nclass SortableTable extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.onSortEnd = ({\n      oldIndex,\n      newIndex\n    }) => {\n      const {\n        data\n      } = this.state;\n\n      if (oldIndex !== newIndex) {\n        const newData = arrayMove([].concat(data), oldIndex, newIndex).filter(el => !!el);\n        this.setState({\n          data: newData\n        });\n      }\n    };\n\n    this.DraggableContainer = props => /*#__PURE__*/_jsxDEV(SortableContainer, {\n      useDragHandle: true,\n      disableAutoscroll: true,\n      helperClass: \"row-dragging\",\n      onSortEnd: this.onSortEnd,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 4\n    }, this);\n\n    this.DraggableBodyRow = ({\n      className,\n      style,\n      ...restProps\n    }) => {\n      const {\n        data\n      } = this.state;\n      const index = data.findIndex(x => x.index === restProps['data-row-key']);\n      return /*#__PURE__*/_jsxDEV(SortableItem, {\n        index: index,\n        ...restProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 10\n      }, this);\n    };\n\n    this.getExcel = excel => {\n      var data = [];\n      let date = new Date();\n      var y = date.getFullYear().toString();\n      var m = (date.getMonth() + 1).toString();\n\n      if (date.getMonth() + 1 < 10) {\n        m = \"0\" + m;\n      }\n\n      var d = date.getDate().toString();\n      var i = 0,\n          j,\n          k,\n          count = 0,\n          task_id,\n          batchNo,\n          type,\n          num,\n          machine_position;\n\n      for (; excel.length > i; ++i) {\n        if (excel[i].hasOwnProperty('矽格股份有限公司')) {\n          if (excel[i]['矽格股份有限公司'].hasOwnProperty('length')) {\n            if (excel[i]['矽格股份有限公司'].indexOf('DX-') > -1) {\n              machine_position = excel[i]['矽格股份有限公司'];\n\n              for (j = i + 2, k = 0; 4 > k && excel.length > j && excel[j].hasOwnProperty('__EMPTY_2'); ++j, ++k) {\n                task_id = y + m + d + excel[j].__EMPTY_2;\n                batchNo = excel[j].__EMPTY_2;\n                type = excel[j].__EMPTY_4;\n                num = excel[j].__EMPTY_7;\n                data[count] = new MachineInfo(count, task_id, batchNo, type, num, machine_position);\n                ++count;\n              }\n\n              if (excel[i].hasOwnProperty('__EMPTY_12')) {\n                machine_position = excel[i].__EMPTY_12;\n\n                for (j = i + 2, k = 0; 4 > k && excel.length > j && excel[j].hasOwnProperty('__EMPTY_15'); ++j, ++k) {\n                  task_id = y + m + d + excel[j].__EMPTY_15;\n                  batchNo = excel[j].__EMPTY_15;\n                  type = excel[j].__EMPTY_17;\n                  num = excel[j].__EMPTY_20;\n                  data[count] = new MachineInfo(count, task_id, batchNo, type, num, machine_position);\n                  ++count;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return data;\n    };\n\n    this.state = {\n      data: this.props.data\n    };\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Table, {\n      pagination: false //true -> 分頁\n      ,\n      columns: this.props.columns,\n      dataSource: this.getExcel(),\n      rowKey: \"index\",\n      components: {\n        body: {\n          wrapper: this.DraggableContainer,\n          row: this.DraggableBodyRow\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default SortableTable;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"SortableItem$sortableElement\");\n$RefreshReg$(_c2, \"SortableItem\");\n$RefreshReg$(_c3, \"SortableContainer$sortableContainer\");\n$RefreshReg$(_c4, \"SortableContainer\");","map":{"version":3,"sources":["/Users/tim/Documents/React/React_test/src/SortableTable.js"],"names":["React","sortableContainer","sortableElement","Table","arrayMove","SortableItem","props","SortableContainer","SortableTable","Component","constructor","onSortEnd","oldIndex","newIndex","data","state","newData","concat","filter","el","setState","DraggableContainer","DraggableBodyRow","className","style","restProps","index","findIndex","x","getExcel","excel","date","Date","y","getFullYear","toString","m","getMonth","d","getDate","i","j","k","count","task_id","batchNo","type","num","machine_position","length","hasOwnProperty","indexOf","__EMPTY_2","__EMPTY_4","__EMPTY_7","MachineInfo","__EMPTY_12","__EMPTY_15","__EMPTY_17","__EMPTY_20","render","columns","body","wrapper","row"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport 'antd/dist/antd.css';\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\nimport { Table } from 'antd';\nimport arrayMove from 'array-move';\n\nconst SortableItem = sortableElement(props => <tr {...props} />);\nconst SortableContainer = sortableContainer(props => <tbody {...props} />);\n\nclass SortableTable extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: this.props.data\n\t\t};\n\t}\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { data } = this.state;\n\t  \tif (oldIndex !== newIndex){\n\t\t\tconst newData = arrayMove([].concat(data), oldIndex, newIndex).filter(el => !!el);\n\t\t\tthis.setState({data: newData});\n\t  \t}\n\t};\n\tDraggableContainer = props => (\n\t  <SortableContainer\n\t\tuseDragHandle\n\t\tdisableAutoscroll\n\t\thelperClass=\"row-dragging\"\n\t\tonSortEnd={this.onSortEnd}\n\t\t{...props}\n\t  />\n\t);\n\tDraggableBodyRow = ({ className, style, ...restProps }) => {\n\t\tconst { data } = this.state;\n\t\tconst index = data.findIndex(x => x.index === restProps['data-row-key']);\n\t\treturn <SortableItem index={index} {...restProps} />;\n\t};\n\tgetExcel = (excel) => {\n\t\tvar data = [];\n\t\tlet date = new Date();\n\t\tvar y = date.getFullYear().toString();\n\t\tvar m = (date.getMonth()+1).toString();\n\t\t\tif( date.getMonth()+1 <10){\n\t\t\t\tm = \"0\" + m;\n\t\t\t}\n\t\tvar d = date.getDate().toString();\n\t\tvar i = 0,j,k,count = 0,task_id,batchNo,type,num,machine_position;\n\t\tfor(;excel.length > i; ++i){\n\t\t\tif(excel[i].hasOwnProperty('矽格股份有限公司')){\n\t\t\t\tif(excel[i]['矽格股份有限公司'].hasOwnProperty('length')){  \n\t\t\t\t\tif(excel[i]['矽格股份有限公司'].indexOf('DX-') > -1){\n\t\t\t\t\t\tmachine_position = excel[i]['矽格股份有限公司'];\n\t\t\t\t\t\tfor(j = i + 2,k = 0;4 > k && excel.length > j && excel[j].hasOwnProperty('__EMPTY_2');++j,++k){\n\t\t\t\t\t\t\ttask_id =  y + m + d + excel[j].__EMPTY_2;\n\t\t\t\t\t\t\tbatchNo = excel[j].__EMPTY_2;\n\t\t\t\t\t\t\ttype = excel[j].__EMPTY_4;\n\t\t\t\t\t\t\tnum = excel[j].__EMPTY_7;\n\t\t\t\t\t\t\tdata[count] = new MachineInfo(count,task_id,batchNo,type,num,machine_position);\n\t\t\t\t\t\t\t++count;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(excel[i].hasOwnProperty('__EMPTY_12')){\n\t\t\t\t\t\t\tmachine_position = excel[i].__EMPTY_12;\n\t\t\t\t\t\t\tfor(j = i + 2,k = 0;4 > k && excel.length > j && excel[j].hasOwnProperty('__EMPTY_15');++j,++k){\n\t\t\t\t\t\t\t\ttask_id =  y + m + d + excel[j].__EMPTY_15;\n\t\t\t\t\t\t\t\tbatchNo = excel[j].__EMPTY_15;\n\t\t\t\t\t\t\t\ttype = excel[j].__EMPTY_17;\n\t\t\t\t\t\t\t\tnum = excel[j].__EMPTY_20;\n\t\t\t\t\t\t\t\tdata[count] = new MachineInfo(count,task_id,batchNo,type,num,machine_position);\n\t\t\t\t\t\t\t\t++count;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\trender() {\n\t\tconst { data } = this.state;\n\t\t\n\t\treturn (\n\t\t\t<Table\n\t\t\tpagination={false} //true -> 分頁\n\t\t\tcolumns={this.props.columns}\n\t\t\tdataSource={this.getExcel()}\n\t\t\trowKey=\"index\"\n\t\t\tcomponents={\n\t\t\t\t{\n\t\t\t\t\tbody: {\n\t\t\t\t\t\twrapper: this.DraggableContainer,\n\t\t\t\t\t\trow: this.DraggableBodyRow,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default SortableTable"]},"metadata":{},"sourceType":"module"}