{"ast":null,"code":"var _jsxFileName = \"/Users/tim/Documents/React/React_test/src/SortableTable.js\";\nimport React from \"react\";\nimport 'antd/dist/antd.css';\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\nimport { Table } from 'antd';\nimport arrayMove from 'array-move';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SortableItem = sortableElement(_c = props => /*#__PURE__*/_jsxDEV(\"tr\", { ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 47\n}, this));\n_c2 = SortableItem;\nconst SortableContainer = sortableContainer(_c3 = props => /*#__PURE__*/_jsxDEV(\"tbody\", { ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 8,\n  columnNumber: 54\n}, this));\n_c4 = SortableContainer;\n\nclass Metadata {\n  constructor(title, dataIndex, className, render) {\n    this.title = title;\n    this.dataIndex = dataIndex;\n    this.className = className;\n    this.render = render;\n  }\n\n}\n\nclass SortableTable extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.getMetadate = () => {\n      var data = [];\n      data.push(new Metadata('拖拉', 'sort', 'drag-visible', () => /*#__PURE__*/_jsxDEV(DragHandle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 59\n      }, this)));\n      data.push(new Metadata('任務編號', 'taskId', 'drag-visible'));\n      data.push(new Metadata('生產批號', 'produceBatchNo'));\n      data.push(new Metadata('產品型號', 'productModelNo'));\n      data.push(new Metadata('現況數量', 'currentQuantity'));\n      data.push(new Metadata('機台位置', 'machinePosition'));\n      data.push(new Metadata('操作', 'action', '', () => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ant-btn\",\n          type: \"button\",\n          onClick: changeOrderStatus,\n          children: \"\\u6D3E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ant-btn\",\n          type: \"button\",\n          onClick: changeToDeleteStatus,\n          children: \"\\u522A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(ManuallyEdit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 4\n      }, this)));\n      data.push(new Metadata('派工狀態', 'currentStatus'));\n      data.push(new Metadata('e-Rack櫃位(待測)', 'eRackPositionNotTested'));\n      data.push(new Metadata('e-Rack櫃位(已測)', 'eRackPositionTested'));\n      data.push(new Metadata('優先序', 'pv'));\n      return data;\n    };\n\n    this.onSortEnd = ({\n      oldIndex,\n      newIndex\n    }) => {\n      const {\n        data\n      } = this.state;\n\n      if (oldIndex !== newIndex) {\n        const newData = arrayMove([].concat(data), oldIndex, newIndex).filter(el => !!el);\n        this.setState({\n          data: newData\n        });\n      }\n    };\n\n    this.DraggableContainer = props => /*#__PURE__*/_jsxDEV(SortableContainer, {\n      useDragHandle: true,\n      disableAutoscroll: true,\n      helperClass: \"row-dragging\",\n      onSortEnd: this.onSortEnd,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this);\n\n    this.DraggableBodyRow = ({\n      className,\n      style,\n      ...restProps\n    }) => {\n      const {\n        data\n      } = this.state;\n      const index = data.findIndex(x => x.index === restProps['data-row-key']);\n      return /*#__PURE__*/_jsxDEV(SortableItem, {\n        index: index,\n        ...restProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 10\n      }, this);\n    };\n\n    this.state = {\n      data: this.props.data\n    };\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Table, {\n      pagination: false //true -> 分頁\n      ,\n      columns: this.props.columns,\n      dataSource: data,\n      rowKey: \"index\",\n      components: {\n        body: {\n          wrapper: this.DraggableContainer,\n          row: this.DraggableBodyRow\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default SortableTable;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"SortableItem$sortableElement\");\n$RefreshReg$(_c2, \"SortableItem\");\n$RefreshReg$(_c3, \"SortableContainer$sortableContainer\");\n$RefreshReg$(_c4, \"SortableContainer\");","map":{"version":3,"sources":["/Users/tim/Documents/React/React_test/src/SortableTable.js"],"names":["React","sortableContainer","sortableElement","Table","arrayMove","SortableItem","props","SortableContainer","Metadata","constructor","title","dataIndex","className","render","SortableTable","Component","getMetadate","data","push","changeOrderStatus","changeToDeleteStatus","onSortEnd","oldIndex","newIndex","state","newData","concat","filter","el","setState","DraggableContainer","DraggableBodyRow","style","restProps","index","findIndex","x","columns","body","wrapper","row"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport 'antd/dist/antd.css';\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\nimport { Table } from 'antd';\nimport arrayMove from 'array-move';\n\nconst SortableItem = sortableElement(props => <tr {...props} />);\nconst SortableContainer = sortableContainer(props => <tbody {...props} />);\n\nclass Metadata{\n\tconstructor(title,dataIndex,className,render){\n\t\tthis.title = title;\n\t\tthis.dataIndex = dataIndex;\n\t\tthis.className = className;\n        this.render = render;\n\t}\n}\n\nclass SortableTable extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: this.props.data\n\t\t};\n\t}\n\tgetMetadate = ()=> {\n\t\tvar data = [];\n\t\tdata.push(new Metadata('拖拉','sort','drag-visible',() => <DragHandle />));\n\t\tdata.push(new Metadata('任務編號','taskId','drag-visible'));\n\t\tdata.push(new Metadata('生產批號','produceBatchNo'));\n\t\tdata.push(new Metadata('產品型號','productModelNo'));\n\t\tdata.push(new Metadata('現況數量','currentQuantity'));\n\t\tdata.push(new Metadata('機台位置','machinePosition'));\n\t\tdata.push(new Metadata('操作','action','',() => \n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"ant-btn\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={changeOrderStatus} >\n\t\t\t\t\t派\n\t\t\t\t</button> \n\t\t\t\t<button\n\t\t\t\t\tclassName=\"ant-btn\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={changeToDeleteStatus} >\n\t\t\t\t\t刪\n\t\t\t\t</button>\n\t\t\t\t<ManuallyEdit />\n\t\t\t</div>\n\t\t));\n\t\tdata.push(new Metadata('派工狀態','currentStatus'));\n\t\tdata.push(new Metadata('e-Rack櫃位(待測)','eRackPositionNotTested'));\n\t\tdata.push(new Metadata('e-Rack櫃位(已測)','eRackPositionTested'));\n\t\tdata.push(new Metadata('優先序','pv'));\n\t\treturn data;\n\t}\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { data } = this.state;\n\t  \tif (oldIndex !== newIndex){\n\t\t\tconst newData = arrayMove([].concat(data), oldIndex, newIndex).filter(el => !!el);\n\t\t\tthis.setState({data: newData});\n\t  \t}\n\t};\n\tDraggableContainer = props => (\n\t  <SortableContainer\n\t\tuseDragHandle\n\t\tdisableAutoscroll\n\t\thelperClass=\"row-dragging\"\n\t\tonSortEnd={this.onSortEnd}\n\t\t{...props}\n\t  />\n\t);\n\tDraggableBodyRow = ({ className, style, ...restProps }) => {\n\t\tconst { data } = this.state;\n\t\tconst index = data.findIndex(x => x.index === restProps['data-row-key']);\n\t\treturn <SortableItem index={index} {...restProps} />;\n\t};\n\t\n\trender() {\n\t\tconst { data } = this.state;\n\t\t\n\t\treturn (\n\t\t\t<Table\n\t\t\tpagination={false} //true -> 分頁\n\t\t\tcolumns={this.props.columns}\n\t\t\tdataSource={data}\n\t\t\trowKey=\"index\"\n\t\t\tcomponents={\n\t\t\t\t{\n\t\t\t\t\tbody: {\n\t\t\t\t\t\twrapper: this.DraggableContainer,\n\t\t\t\t\t\trow: this.DraggableBodyRow,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default SortableTable"]},"metadata":{},"sourceType":"module"}