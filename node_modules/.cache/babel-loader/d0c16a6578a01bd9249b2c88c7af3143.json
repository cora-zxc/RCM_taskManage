{"ast":null,"code":"var _jsxFileName = \"/Users/tim/Documents/RCM_taskManage/src/SortableTable.js\";\nimport React from \"react\";\nimport 'antd/dist/antd.css';\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\nimport { Table, Button, Popconfirm } from 'antd';\nimport arrayMove from 'array-move';\nimport { sortableHandle } from 'react-sortable-hoc';\nimport { MenuOutlined } from '@ant-design/icons';\nimport ManuallyEdit from './ManuallyEdit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SortableItem = sortableElement(_c = props => /*#__PURE__*/_jsxDEV(\"tr\", { ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 10,\n  columnNumber: 47\n}, this));\n_c2 = SortableItem;\nconst SortableContainer = sortableContainer(_c3 = props => /*#__PURE__*/_jsxDEV(\"tbody\", { ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 11,\n  columnNumber: 54\n}, this));\n_c4 = SortableContainer;\nconst DragHandle = sortableHandle(_c5 = () => /*#__PURE__*/_jsxDEV(MenuOutlined, {\n  style: {\n    cursor: 'grab',\n    color: '#999'\n  }\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 41\n}, this));\n_c6 = DragHandle;\n\nclass SortableTable extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.changeOrderStatus = event => {\n      event.target.parentNode.parentNode.nextSibling.textContent = \"已派工\";\n      event.target.parentNode.parentNode.nextSibling.style.color = \"blue\";\n    };\n\n    this.changeToDeleteStatus = event => {\n      var status = window.confirm(\"確定要刪除嗎？\");\n\n      if (status) {\n        event.target.parentNode.parentNode.nextSibling.textContent = \"已刪除\";\n        event.target.parentNode.parentNode.nextSibling.style.color = \"red\";\n        event.target.disabled = true;\n        event.target.previousSibling.disabled = true;\n        event.target.nextSibling.lastChild.disabled = true;\n      } //console.log(event);\n\n    };\n\n    this.getMetadate = () => {\n      //欄位項目的建構式\n      function Metadata(title, dataIndex, className, render) {\n        return {\n          title: title,\n          dataIndex: dataIndex,\n          className: className,\n          render: render\n        };\n      } //生成欄位項目\n\n\n      var data = [];\n      data.push(Metadata('拖拉', 'sort', 'drag-visible', () => /*#__PURE__*/_jsxDEV(DragHandle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 55\n      }, this)));\n      data.push(Metadata('任務編號', 'taskId', 'drag-visible'));\n      data.push(Metadata('生產批號', 'produceBatchNo'));\n      data.push(Metadata('產品型號', 'productModelNo'));\n      data.push(Metadata('現況數量', 'currentQuantity'));\n      data.push(Metadata('機台位置', 'machinePosition'));\n      data.push(Metadata('操作', 'action', '', () => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ant-btn\",\n          type: \"button\",\n          onClick: this.changeOrderStatus,\n          children: \"\\u6D3E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ant-btn\",\n          type: \"button\",\n          onClick: this.changeToDeleteStatus,\n          children: \"\\u522A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(ManuallyEdit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 4\n      }, this)));\n      data.push(Metadata('派工狀態', 'currentStatus'));\n      data.push(Metadata('e-Rack櫃位(待測)', 'eRackPositionNotTested'));\n      data.push(Metadata('e-Rack櫃位(已測)', 'eRackPositionTested'));\n      data.push(Metadata('優先序', 'pv'));\n      return data;\n    };\n\n    this.onSortEnd = ({\n      oldIndex,\n      newIndex\n    }) => {\n      const {\n        data\n      } = this.state;\n\n      if (oldIndex !== newIndex) {\n        const newData = arrayMove([].concat(data), oldIndex, newIndex).filter(el => !!el);\n        this.setState({\n          data: newData\n        });\n      }\n    };\n\n    this.DraggableContainer = props => /*#__PURE__*/_jsxDEV(SortableContainer, {\n      useDragHandle: true,\n      disableAutoscroll: true,\n      helperClass: \"row-dragging\",\n      onSortEnd: this.onSortEnd,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }, this);\n\n    this.DraggableBodyRow = ({\n      className,\n      style,\n      ...restProps\n    }) => {\n      const {\n        data\n      } = this.state;\n      const index = data.findIndex(x => x.index === restProps['data-row-key']);\n      return /*#__PURE__*/_jsxDEV(SortableItem, {\n        index: index,\n        ...restProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 10\n      }, this);\n    };\n\n    this.state = {\n      data: this.props.data\n    };\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n    this.columns = [{\n      title: \"拖拉\",\n      dataIndex: \"sort\",\n      className: \"drag-visible\",\n      key: \"sort\",\n      render: () => /*#__PURE__*/_jsxDEV(DragHandle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 20\n      }, this)\n    }, {\n      title: \"任務編號\",\n      dataIndex: \"taskId\",\n      className: \"drag-visible\",\n      key: \"taskId\"\n    }, {\n      title: \"生產批號\",\n      dataIndex: \"produceBatchNo\",\n      key: \"produceBatchNo\"\n    }, {\n      title: \"產品型號\",\n      dataIndex: \"productModelNo\",\n      key: \"productModelNo\"\n    }, {\n      title: \"現況數量\",\n      dataIndex: \"currentQuantity\",\n      key: \"currentQuantity\"\n    }, {\n      title: \"機台位置\",\n      dataIndex: \"machinePosition\",\n      key: \"machinePosition\"\n    }, {\n      title: \"操作\",\n      dataIndex: \"action\",\n      key: \"action\",\n      render: (text, record, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"ant-btn\",\n          type: \"button\",\n          onClick: this.changeOrderStatus,\n          children: \"\\u6D3E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n          title: \"\\u78BA\\u5B9A\\u8981\\u522A\\u9664?\",\n          onConfirm: this.delete,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            className: \"ant-btn\",\n            type: \"button\",\n            onClick: this.changeToDeleteStatus,\n            children: \"\\u522A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(ManuallyEdit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }, this)\n    }, {\n      title: \"派工狀態\",\n      dataIndex: \"currentStatus\",\n      key: \"currentStatus\"\n    }, {\n      title: \"e-Rack櫃位(待測)\",\n      dataIndex: \"eRackPositionNotTested\",\n      key: \"eRackPositionNotTested\"\n    }, {\n      title: \"e-Rack櫃位(已測)\",\n      dataIndex: \"eRackPositionTested\",\n      key: \"eRackPositionTested\"\n    }, {\n      title: \"優先序\",\n      dataIndex: \"pv\",\n      key: \"pv\"\n    }];\n    return /*#__PURE__*/_jsxDEV(Table, {\n      pagination: false //true -> 分頁\n      ,\n      columns: this.columns,\n      dataSource: data,\n      rowKey: \"index\",\n      components: {\n        body: {\n          wrapper: this.DraggableContainer,\n          row: this.DraggableBodyRow\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default SortableTable;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"SortableItem$sortableElement\");\n$RefreshReg$(_c2, \"SortableItem\");\n$RefreshReg$(_c3, \"SortableContainer$sortableContainer\");\n$RefreshReg$(_c4, \"SortableContainer\");\n$RefreshReg$(_c5, \"DragHandle$sortableHandle\");\n$RefreshReg$(_c6, \"DragHandle\");","map":{"version":3,"sources":["/Users/tim/Documents/RCM_taskManage/src/SortableTable.js"],"names":["React","sortableContainer","sortableElement","Table","Button","Popconfirm","arrayMove","sortableHandle","MenuOutlined","ManuallyEdit","SortableItem","props","SortableContainer","DragHandle","cursor","color","SortableTable","Component","constructor","changeOrderStatus","event","target","parentNode","nextSibling","textContent","style","changeToDeleteStatus","status","window","confirm","disabled","previousSibling","lastChild","getMetadate","Metadata","title","dataIndex","className","render","data","push","onSortEnd","oldIndex","newIndex","state","newData","concat","filter","el","setState","DraggableContainer","DraggableBodyRow","restProps","index","findIndex","x","columns","key","text","record","delete","body","wrapper","row"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport 'antd/dist/antd.css';\nimport { sortableContainer, sortableElement } from 'react-sortable-hoc';\nimport { Table, Button, Popconfirm } from 'antd';\nimport arrayMove from 'array-move';\nimport { sortableHandle } from 'react-sortable-hoc';\nimport { MenuOutlined } from '@ant-design/icons';\nimport ManuallyEdit from './ManuallyEdit';\n\nconst SortableItem = sortableElement(props => <tr {...props} />);\nconst SortableContainer = sortableContainer(props => <tbody {...props} />);\nconst DragHandle = sortableHandle(() => <MenuOutlined style={{ cursor: 'grab', color: '#999' }} />);\n\nclass SortableTable extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: this.props.data\n\t\t};\n\t}\n\tchangeOrderStatus = (event) => {\n\t\tevent.target.parentNode.parentNode.nextSibling.textContent = \"已派工\";\n\t\tevent.target.parentNode.parentNode.nextSibling.style.color = \"blue\";\n\t}\n\tchangeToDeleteStatus = (event) => {\n\t\tvar status = window.confirm(\"確定要刪除嗎？\");\n\t\tif(status){\n\t\t\tevent.target.parentNode.parentNode.nextSibling.textContent = \"已刪除\";\n\t\t\tevent.target.parentNode.parentNode.nextSibling.style.color = \"red\";\n\t\t\tevent.target.disabled=true;\n\t\t\tevent.target.previousSibling.disabled=true;\n\t\t\tevent.target.nextSibling.lastChild.disabled=true;\n\t\t}\n\t\t//console.log(event);\n\t}\n\tgetMetadate = ()=> {\n\t\t//欄位項目的建構式\n\t\tfunction Metadata(title,dataIndex,className,render){\n\t\t\treturn {\n\t\t\t\ttitle : title,\n\t\t\t\tdataIndex : dataIndex,\n\t\t\t\tclassName : className,\n\t\t\t\trender : render,\n\t\t\t};\n\t\t}\n\t\t//生成欄位項目\n\t\tvar data = [];\n\t\tdata.push(Metadata('拖拉','sort','drag-visible',() => <DragHandle />));\n\t\tdata.push(Metadata('任務編號','taskId','drag-visible'));\n\t\tdata.push(Metadata('生產批號','produceBatchNo'));\n\t\tdata.push(Metadata('產品型號','productModelNo'));\n\t\tdata.push(Metadata('現況數量','currentQuantity'));\n\t\tdata.push(Metadata('機台位置','machinePosition'));\n\t\tdata.push(Metadata('操作','action','',() => \n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"ant-btn\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={this.changeOrderStatus} >\n\t\t\t\t\t派\n\t\t\t\t</button> \n\t\t\t\t<button\n\t\t\t\t\tclassName=\"ant-btn\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={this.changeToDeleteStatus} >\n\t\t\t\t\t刪\n\t\t\t\t</button>\n\t\t\t\t<ManuallyEdit />\n\t\t\t</div>\n\t\t));\n\t\tdata.push(Metadata('派工狀態','currentStatus'));\n\t\tdata.push(Metadata('e-Rack櫃位(待測)','eRackPositionNotTested'));\n\t\tdata.push(Metadata('e-Rack櫃位(已測)','eRackPositionTested'));\n\t\tdata.push(Metadata('優先序','pv'));\n\t\treturn data;\n\t}\n\tonSortEnd = ({ oldIndex, newIndex }) => {\n\t\tconst { data } = this.state;\n\t  \tif (oldIndex !== newIndex){\n\t\t\tconst newData = arrayMove([].concat(data), oldIndex, newIndex).filter(el => !!el);\n\t\t\tthis.setState({data: newData});\n\t  \t}\n\t}\n\tDraggableContainer = props => (\n\t  <SortableContainer\n\t\tuseDragHandle\n\t\tdisableAutoscroll\n\t\thelperClass=\"row-dragging\"\n\t\tonSortEnd={this.onSortEnd}\n\t\t{...props}\n\t  />\n\t)\n\tDraggableBodyRow = ({ className, style, ...restProps }) => {\n\t\tconst { data } = this.state;\n\t\tconst index = data.findIndex(x => x.index === restProps['data-row-key']);\n\t\treturn <SortableItem index={index} {...restProps} />;\n\t}\n\trender() {\n\t\tconst { data } = this.state;\n\t\tthis.columns = [\n\t\t\t{\n\t\t\t  title: \"拖拉\",\n\t\t\t  dataIndex: \"sort\",\n\t\t\t  className: \"drag-visible\",\n\t\t\t  key: \"sort\",\n\t\t\t  render: () => <DragHandle />\n\t\t\t},\n\t\t\t{\n\t\t\t  title: \"任務編號\",\n\t\t\t  dataIndex: \"taskId\",\n\t\t\t  className: \"drag-visible\",\n\t\t\t  key: \"taskId\"\n\t\t\t},\n\t\t\t{\n\t\t\t  title: \"生產批號\",\n\t\t\t  dataIndex: \"produceBatchNo\",\n\t\t\t  key: \"produceBatchNo\"\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"產品型號\",\n\t\t\t\tdataIndex: \"productModelNo\",\n\t\t\t\tkey: \"productModelNo\"\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"現況數量\",\n\t\t\t\tdataIndex: \"currentQuantity\",\n\t\t\t\tkey: \"currentQuantity\"\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"機台位置\",\n\t\t\t\tdataIndex: \"machinePosition\",\n\t\t\t\tkey: \"machinePosition\"\n\t\t\t},\n\t\t\t{\n\t\t\t  title: \"操作\",\n\t\t\t  dataIndex: \"action\",\n\t\t\t  key: \"action\",\n\t\t\t  render: (text, record, index) => (\n\t\t\t\t<div>\n\t\t\t\t  <Button\n\t\t\t\t\tclassName=\"ant-btn\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonClick={this.changeOrderStatus}\n\t\t\t\t  >\n\t\t\t\t\t派\n\t\t\t\t  </Button>\n\t\t\t\t  <Popconfirm title=\"確定要刪除?\" onConfirm={this.delete}>\n\t\t\t\t\t<Button\n\t\t\t\t\t  className=\"ant-btn\"\n\t\t\t\t\t  type=\"button\"\n\t\t\t\t\t  onClick={this.changeToDeleteStatus}\n\t\t\t\t\t>\n\t\t\t\t\t  刪\n\t\t\t\t\t</Button>\n\t\t\t\t  </Popconfirm>\n\t\t\t\t  <ManuallyEdit />\n\t\t\t\t</div>\n\t\t\t  )\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"派工狀態\",\n\t\t\t\tdataIndex: \"currentStatus\",\n\t\t\t\tkey: \"currentStatus\"\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"e-Rack櫃位(待測)\",\n\t\t\t\tdataIndex: \"eRackPositionNotTested\",\n\t\t\t\tkey: \"eRackPositionNotTested\"\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"e-Rack櫃位(已測)\",\n\t\t\t\tdataIndex: \"eRackPositionTested\",\n\t\t\t\tkey: \"eRackPositionTested\"\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: \"優先序\",\n\t\t\t\tdataIndex: \"pv\",\n\t\t\t\tkey: \"pv\"\n\t\t\t}\n\t\t  ];\n\t\treturn (\n\t\t\t<Table\n\t\t\t\tpagination={false} //true -> 分頁\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tdataSource={data}\n\t\t\t\trowKey=\"index\"\n\t\t\t\tcomponents={\n\t\t\t\t\t{\n\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\twrapper: this.DraggableContainer,\n\t\t\t\t\t\t\trow: this.DraggableBodyRow,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default SortableTable"]},"metadata":{},"sourceType":"module"}